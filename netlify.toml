[build]
  command = "pnpm run build"
  publish = "dist"

# Uncomment and add more as needed
# [[headers]]
#   for = "/private/*"
#   [headers.values]
#     X-Robots-Tag = "noindex"
# [[headers]]
#   for = "/some-page.html"
#   [headers.values]
#     X-Robots-Tag = "noindex"

[[headers]]
  for = "/*"
  [headers.values]
    X-Robots-Tag = "index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"

[context.production]
  # Ensure production explicitly serves the robots header. Keeps previews/branch deploys free to override.
  [[headers]]
    for = "/*"
    [headers.values]
      X-Robots-Tag = "index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"

# Example: explicit noindex for a style guide route (page not present now; keep commented or enable if you add the page)
# [[headers]]
#   for = "/style-guide"
#   [headers.values]
#     X-Robots-Tag = "noindex"

# Static asset caching with compression
[[headers]]
  for = "/*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.woff2"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.woff"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.avif"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.webp"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.jpg"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.png"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.svg"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# Example: Add redirects
# [[redirects]]
#   from = "/old-path"
#   to = "/new-path"
#   status = 301
