---
import { ResponsiveHeadline } from '~components/ResponsiveHeadline';
import { Button } from '../../Button/Button';
import type { TypeCourseSkeleton } from '../../../types/contentful';

import { format } from 'date-fns';

import * as style from './MiniCard.css';
import { contentfulClient } from '~lib/contentful';
import { CourseInfo } from '../CourseInfo';

// const todayUTC = new Date();
// const utcDateString = todayUTC.toISOString();

const {
  title,
  isCoursePage,
  label,
  course,
  amenities,
  courseWebsite,
  results,
  tournaments,
  price,
  players,
  date,
} = Astro.props;

const validDate = date && !isNaN(Date.parse(date)) ? new Date(date) : null;
---

<div class={style.miniCardWrapper}>
  <ResponsiveHeadline className={style.miniCardTitle} size={1} as="h2"
    >{title}</ResponsiveHeadline
  >
  <div class={style.miniCard}>
    <ResponsiveHeadline className={style.miniCardCourse} size={1} as="h3">
      {course}
    </ResponsiveHeadline>
    <div class={style.dateTimeWrapper}>
      {
        validDate ? (
          <>
            <span>{format(date, 'E M/d/yy')}</span>@
            <span>{format(date, 'h:mmaaa')}</span>
          </>
        ) : (
          <span>Date not available</span>
        )
      }
    </div>
  </div>
  <CourseInfo
    client:load
    amenities={amenities}
    price={price}
    players={players}
  />
</div>
