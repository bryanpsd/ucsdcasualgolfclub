---
import Layout from "../../layouts/Layout.astro";
import { contentfulClient } from "../../lib/contentful";
import type { TypeSimplePageSkeleton } from "../../types/contentful";
import { RichText } from "~components/RichText";

import * as style from "./HomePage.css";
import { MiniCard } from "~components/Course/MiniCard";
import { Leaderboard } from "~components/Leaderboard";

const entries = await contentfulClient.getEntries<TypeSimplePageSkeleton>({
  content_type: "simplePage",
  "fields.title": "Home",
});

// if (!courseData.data || courseData.error) {
//   return new Response(404);
// }
---

<Layout
  title="Home | UCSD Casual Golf CLub"
  description="The homepage for the UCSD Casual Golf Club"
>
  <div class={style.homeWrapper}>
    <section class={style.homeHero}>
      <MiniCard title="Upcoming Tournament" label="Details" />
    </section>
    <section class={style.homeColWrapper}>
      {
        entries.items.map((item) => (
          <section class={style.leftCol}>
            {item.fields.content && (
              <RichText richText={item.fields.content} client:load />
            )}
          </section>
        ))
      }
      <section class={style.rightCol}>
        <Leaderboard gross />
        <Leaderboard net firstFlight />
        <Leaderboard net secondFlight />
      </section>
    </section>
  </div>
</Layout>
